# PARAMETERS FOR GADEN #
# ===================== #

# ================
gaden_environment:
  ros__parameters:
    verbose: true
    wait_preprocessing: false   # wait for the ok from gaden_preprocessing before running
    fixed_frame: "map"

    # Plot CAD models (Collada format .dae)
    number_of_CAD: 5
    CAD_0: "$(var pkg_dir)/scenarios/$(var scenario)/cad_models/10x6_walls.dae"
    CAD_0_color: [0.92, 0.96, 0.96]
    CAD_1: "$(var pkg_dir)/scenarios/$(var scenario)/cad_models/10x6_door_left.dae"
    CAD_1_color: [0.96, 0.17, 0.3]
    CAD_2: "$(var pkg_dir)/scenarios/$(var scenario)/cad_models/10x6_door_right.dae"
    CAD_2_color: [0.96, 0.17, 0.3]
    CAD_3: "$(var pkg_dir)/scenarios/$(var scenario)/cad_models/10x6_maze_obj_1.dae"
    CAD_3_color: [0.92, 0.96, 0.96]
    CAD_4: "$(var pkg_dir)/scenarios/$(var scenario)/cad_models/10x6_maze_obj_2.dae"
    CAD_4_color: [0.92, 0.96, 0.96]

    # Plot 3D OccupancyGridmap
    occupancy3D_data: "$(var pkg_dir)/scenarios/$(var scenario)/OccupancyGrid3D.csv"

    # Plot gas sources
    number_of_sources: 1
    source_0_position_x: $(var source_x)
    source_0_position_y: $(var source_y)
    source_0_position_z: $(var source_z)
    source_0_scale: 0.2
    source_0_color: [0.0, 1.0, 0.0] 


# ================
gaden_filament_simulator:
  ros__parameters:
    verbose: true
    wait_preprocessing: false          ### wait for the ok from preprocessing before starting the simulation
    sim_time: 300.0                    ### [sec] Total time of the gas dispersion simulation
    time_step: 0.1                     ### [sec] Time increment between snapshots. Set aprox = cell_size/max_wind_speed.
    num_filaments_sec: 10              ### Num of filaments released each second
    variable_rate: true                ### If true the number of released filaments would be random(0,numFilaments_sec)
    filament_stop_steps: 0  
    ppm_filament_center: 10.0          ### [ppm] Gas concentration at the center of the 3D gaussian (filament)
    filament_initial_std: 10.0         ### [cm] Sigma of the filament at t=0-> 3DGaussian shape
    filament_growth_gamma: 10.0        ### [cmÂ²/s] Growth ratio of the filament_std
    filament_noise_std: 0.02           ### [m] Range of the white noise added on each iteration
    gas_type: $(var gas_type)          ### 0=Ethanol, 1=Methane, 2=Hydrogen, 6=Acetone
    temperature: 298.0                 ### [Kelvins]
    pressure: 1.0                      ### [Atm]
    concentration_unit_choice: 1       ### 0=molecules/cm3, 1=ppm (when ppm is used, set temp and pressure accordingly)

    # In the occupancyGrid.csv file we set: cell_size, num_cells, etc. which come from the CFD wind simulation
    occupancy3D_data: "$(var pkg_dir)/scenarios/$(var scenario)/OccupancyGrid3D.csv"
    fixed_frame: "map"

    # WindFlow data (from CFD)
    wind_data: "$(var pkg_dir)/scenarios/$(var scenario)/wind_simulations/$(var wind_sim_path)"
    wind_time_step: 1.0                ### (sec) time increment between Wind snapshots

    # Loop options
    allow_looping: true
    loop_from_step: 0
    loop_to_step: 24

    # Location of the release point!
    source_position_x: $(var source_x)            ### (m)
    source_position_y: $(var source_y)            ### (m)
    source_position_z: $(var source_z)            ### (m)

    save_results: 1                    #1=true, 0=false
    results_time_step: 0.5             #(sec) Time increment between saving state to file
    results_min_time: 0.0              #(sec) Time to start saving results to file
    results_location: "$(var pkg_dir)/scenarios/$(var scenario)/gas_simulations/$(var simulation)"

# ================
gaden_player:
  ros__parameters:
    verbose: true
    player_freq: 2.0         ### (Hz) Freq for loading the simulation log_files
    initial_iteration: 0
    num_simulators: 1        ### Number of simulations to load [1-inf] (useful for multiple sources and gases)

    # Data from the "filament_simulator" pkg. Multiple sources can be set here
    simulation_data_0: "$(var pkg_dir)/scenarios/$(var scenario)/gas_simulations/$(var simulation)"
    occupancyFile: "$(var pkg_dir)/scenarios/$(var scenario)/OccupancyGrid3D.csv"

    # Loop options        
    allow_looping: false
    loop_from_iteration: 15
    loop_to_iteration: 24